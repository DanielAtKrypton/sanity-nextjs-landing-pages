language: node_js
node_js:
- '12'
install:
- npm ci
script:
- npm test
after_success:
- git config credential.helper "store --file=.git/credentials"
- echo "https://${GH_TOKEN}:@github.com" > .git/credentials
after_script:
- source ./scripts/create_branches.sh
- create_all_branches *
- git checkout master
- find -maxdepth 1 -name node_modules -type d | xargs sudo rm -rf
- find -maxdepth 2 -name node_modules -type d | xargs sudo rm -rf
- find -maxdepth 3 -name node_modules -type d | xargs sudo rm -rf
- find ! -regex '^./build\(/.*\)?' -a ! -regex '^./.git\(/.*\)?' -a ! -regex '.' |
  xargs sudo rm -rf
- mv ./build/* .
- mv ./build/.* .
- sudo rm build -r
- setup_git_user
- git add .
- git commit -m "Push from development branch at Travis"
- git push origin master
env:
  global:
    secure: ZPOfrxBWiw9cJjC6fS4N6awSV6qVCZHMqBtC79IifaGZ4SQ+fRbmU92CG8loP+nX1NG2c2Bj5IEfp/uLgrofIHT3isgEnUddbtTCEDk8+zRsWVrVINNXb/nsw4iRSnu7UyvS5SFvj6ubm5dY+yPlbuiou/IJdTGPhAaO2NhSMrYwAy95q5k97zkZIpUTil99JMOHGra+eJL0kHU4HNrtJrSvKqamWF7ha/0Zk+gmwpKUM/imYrd9Q38ngxOkCePvUp5z0HMFlnj1Y/H1pdc1RpoorXxKGb6GXa5sA1VRNpPBn5AGcMxutW/3XqfSnmARva/F8/9U+k4IMAMmdYYV+TkTiqR6qyV+W/v3Msh4FkOkWCQyKLH63ROBlJEC1QOO2UDttIzrX6Pp59uFFVP2cix12pevjW0vI/BQHDwd4bQiM3imrWmopglkvodAPMK76gBHQnRJ30oyrv47+jRx6JLKcmT1QoKasjAmKpVas0KIkJGMjlceSbvxeEup4iJ5+H7E+Q5E4+TxJCNjAqCNABQgerD1decwUMV9xI7LAZDezxnBRZanJt1KYCZMLsuRhC4Kqxz1NzH9frIHYMjcSBy/UyD1ry6QlowoLBtSguSKmx0uYK3jlzuM9OeeF5OQtrKuGH7rbUP02PtH/sGAMRoAHFvsQXry85p+/EpQJPo=
