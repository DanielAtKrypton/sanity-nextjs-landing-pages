language: node_js
node_js:
- '12'
install:
- npm ci
script:
- npm test
after_success:
- git config credential.helper "store --file=.git/credentials"
- echo "https://${GH_TOKEN}:@github.com" > .git/credentials
after_script:
- source ./scripts/create_all_branches.sh
- create_all_branches
- git checkout master
- sudo find . ! -regex '^./build\(/.*\)?' -a ! -regex '^./.git\(/.*\)?' -o -regex
  '^./build/studio/dist\(/.*\)?' -o -regex '^./build/web/out\(/.*\)?' -o -name node_modules
  -type d | xargs sudo rm -rf
- sudo mv -v ./build/* ./build/.* .
- sudo rm ./build -r
- setup_git_user
- git add .
- git commit -m "Push from development branch at Travis"
- git push origin master
env:
  global:
    secure: UJC1ROMjqfxNqKeEGZq4+poq8fUAWyPvvtWDbzgEV0E1lsf2+o75ompoo77Dr0ndbZtjcHIX1zsgEDcWuPxnMSNcCYPRIMJTbFLF7n1drCg1l7GjGwkEklqeIKexbnNieeL1x8peP9Yeyu1NRUZHCdkyF5C83dlFjqA0fGlIlD/J+BxB5HLe+22S52327k+PxIqqBnd+FHNz9RV0L8EscdiYYGToAMUQ4SYShK8v4zWG7SVT05/bttCuZyV93mct6QR+3wrm/oLtPD1CC3vQnIYvmq9oCSzvfHAWryTwSNX2XOrKoUyoCYxEw6qqZ+/9TlYOMrk3P6PCay1FWr/GMlCTSqoQ6MKwYTU8HOIvtIm2WA69u3Ht1codRn6z9o+x2lKYLVC256QwMG2ZiBKJsyVEFuA77htX4KTXrAHAkkFbdJZiVIJRm61D95zqsajGi3M96nmYdqZWBb55wmWUwn8EZwcUWReOqQTvfvYGxvAj7bPv1j0R7bkJwUZiqkCANK4N10ugraalDjvRGADV6TH/MPK7SDrKcLwmUlsvO9NtUSiM2EEXyqMjgCePTWaNuKVptYiFP16KaszV2hUYtj/BbNSeHURp7yMDbMD4tqOcpnVX9SBXi9yLHmJUXmuQOaMhOrIrYAd4uxU4aQaJRz7llKp5+lE2slytBgHBQO0=
