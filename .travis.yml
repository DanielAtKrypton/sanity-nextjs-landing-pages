language: node_js
node_js:
- '12'
install:
- npm ci
script:
- npm test
after_success:
- git config credential.helper "store --file=.git/credentials"
- echo "https://${GH_TOKEN}:@github.com" > .git/credentials
after_script:
- source ./scripts/create_all_branches.sh
- create_all_branches
- git checkout master
- sudo find ! -regex '^./build\(/.*\)?' -a ! -regex '^./.git\(/.*\)?' -a ! -regex '.' | xargs sudo rm -rf
- mv ./build/* .
- mv ./build/.* .
- sudo rm build -r
- setup_git_user
- git add .
- git commit -m "Push from development branch at Travis"
- git push origin master
env:
  global:
    secure: Hepe9EE8QE6i6uVN2LPEaioCRXLCiWovk97snl3AR9BDEaTbDifyi6UIUi5FWvj1ualwS3l148Kh6H30R/czVWdbVrnUg/2GJRAcCs3/EL+cMjDSnKl9mvl99E/lyJLKTzki9u0mKnZHAKK1SqAk490whrEWMcum07XbujJD03mlGWZcIXSyet5T01Sw3A57rEg3zbfNGnBCAkM/Q20Sjb8+0TDwcJWAh2He+U7HAPjQwBYExpCHxr8/RCoj3HaqKBHiVAPhbhhJgrBiW5Q3GBfRh3BCbV0/qrKPZuA5UHzB6iy2wH8DNZ05dr3nJ8b4OtDbwRz7ufKJNOt0P0J5sTES8DbKzJ8YCP0QGDcpXa5gVeUWPtVoF24vIMEYnoxW2mmee+2woIcjukF9QdhhFFSgomavrBWcsstPXVxI0I2FSyFWTD7OoirPQRRXGjsv5+rV4H+IkNlMLTjlakrubGhwmMY1+knyWv7DbOh/VQakm7MGeaZ0F4yhX1/lsI4NYr5RS7bjigf2HXMXx/Au7bQedbHAy+9ECXkyMNYr6wB30f4NyooJC5VOz/kV6T+qNvzdSOFHOmgTRUWCKAbOjG7cpseqI0mJWPOxJOZUkDThBubSuuVMiBRdPz0IDJIVbhMScEE9WiquQfgl7tjEHNLRI89i6QyXAEEB9Nc7FSg=
