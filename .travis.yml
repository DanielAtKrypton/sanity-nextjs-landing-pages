language: node_js
node_js:
- '12'
install:
- npm ci
script:
- npm test
after_success:
- git config credential.helper "store --file=.git/credentials"
- echo "https://${GH_TOKEN}:@github.com" > .git/credentials
after_script:
- source ./scripts/create_branches.sh
- create_all_branches
- git checkout master
- find -maxdepth 1 -name node_modules -type d | xargs sudo rm -rf
- find -maxdepth 2 -name node_modules -type d | xargs sudo rm -rf
- find -maxdepth 3 -name node_modules -type d | xargs sudo rm -rf
- find ! -regex '^./build\(/.*\)?' -a ! -regex '^./.git\(/.*\)?' -a ! -regex '.' |
  xargs sudo rm -rf
- sudo mv ./build/* .
- sudo mv ./build/.* .
- sudo rm build -r
- setup_git_user
- git add .
- git commit -m "Push from development branch at Travis"
- git push origin master
env:
  global:
    secure: mCxoTovJJf+dO2eF4BBubLUNd/bunkQEPGUYRBwj6RRtizILbORWQtEeNR6rmPT3NGZo0lJLKR18XNTNMCVTcGizHHnfJY2Ic6T4QIOTQX4Fiqz8bpXEvztjXtuL6CiFkSQiyffQ6vVCbu9ahc9Ts9su9xEJzpoHpy2yOmMw5RndvYn/+nt/24dCwKhZ+8+BI5LZ8cOdZxZJsE94FILVjwCT9LfvhNqYhsg54U0icaxGPZf3f7S0svTdme7H7xAnJ7Y0u36tuqkBishHOfJbP2+OFIW8JhxkOpcSiZrWfSDqjSM+1BEX9JixQ2UtGOQXohvZbIDJrV/QEA86La6iB7PyLK/3Mk5RjABzhUEn3wOYYHNjr6QEskadtuH3VM0Hzqs8S+R91rHdzGEJlgnflGFNlGu/4Q61wcEIc1kWLYFTNmkV/4TGPGqthFg4Gt578NAnNv/lTtcAxdNa/vJZwDnVENDR+gxu7UEPhn6eFtoiFSH6ClbqCgOBkdjCeTnF/prS8TNPBTKAaaTKIU7eiz74TCTzHZqHcjr3OWdMctGZRV3FqMYNeMTb5qbIQh4MeW44czr3P+8801Rrgo7ksVPcEVFGi3AaxOeyBKtQbwShDu0NK01T84so5X500IDiJt8TfHprvmMEAqaqdyZExtQvsStjc+o7ZZ6WHv3LquQ=
