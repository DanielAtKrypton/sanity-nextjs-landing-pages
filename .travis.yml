language: node_js
node_js:
- '12'
install:
- npm ci
script:
- npm test
after_success:
- git config credential.helper "store --file=.git/credentials"
- echo "https://${GH_TOKEN}:@github.com" > .git/credentials
after_script:
- source ./scripts/create_all_branches.sh
- create_all_branches
- git checkout master
- find -maxdepth 1 -name node_modules -type d | xargs sudo rm -rf
- find -maxdepth 2 -name node_modules -type d | xargs sudo rm -rf
- find -maxdepth 3 -name node_modules -type d | xargs sudo rm -rf
- find ! -regex '^./build\(/.*\)?' -a ! -regex '^./.git\(/.*\)?' -a ! -regex '.' |
  xargs sudo rm -rf
- sudo mv ./build/* .
- sudo mv ./build/.* .
- sudo rm build -r
- setup_git_user
- git add .
- git commit -m "Push from development branch at Travis"
- git push origin master
env:
  global:
    secure: Flxg3DIWLGPelSukWUzOdzvIJa2/Mw1AmyXed8uyVPcl2rhW9nqlpwsyuPDQ2o5tkXKPtYHvtOr/jVkng9feLULcKN9N5fIIO+tLPajQMmARXlkoy7RrSs/EFsvcuLwHiyQCjJyb/pKjTs5+WZcpLLeXboSsFjC0sT+ZQY+DBoOAUQbkezmv1ivzw+FgXvWM5nsVdh2kpKNN2BThuZx//TZvHzxun9TH1OTSE4dKDQqrfxsV/0kE0/x1GAM1+O7NlVHaoJuf5zzFzeid1N3Xt/H1Eo+Mdregvwp2AIAC6BVYTMDUsUlYNrmIcTVZGweyGGw7vlfhZvg2N8O7tBDi619yNVc5KO4O9zD6Tel/bRErdpwJhWyY6ghEPJyJQfXZGCAtBXWJWXHZ170jq19ZjNhfRMKPyJK2FAJQIPVM81ql99QJjM/WT4RG293hVkKTNulvi/NJ1jzZPx2BdbJCGjX8k6XPrk7Avn4ZaFpEQ/9Ni6Ou0vFz3EQIm4fCHil4zGzWAjmkB5PY3GPi3bZp87a6ZhZ4QetEovmk7NvgPCKJvegtkMPHC9zkM9l12Uav5oMQlqdP82rnECTXmk9c0CXuj0P6/4Glwe4Ho08spDDyozXGLZzM5LODuinVVf7Atwdy1BN5M5yWdibZfdCsr7d9xsQA+alC3BP9eE79EDE=
