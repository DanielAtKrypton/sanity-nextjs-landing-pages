language: node_js
node_js:
- '12'
install:
- npm ci
script:
- npm test
after_success:
- git config credential.helper "store --file=.git/credentials"
- echo "https://${GH_TOKEN}:@github.com" > .git/credentials
after_script:
- source ./scripts/create_branches.sh
- create_branches *
- git checkout master
- find -maxdepth 1 -name node_modules -type d | xargs sudo rm -rf
- find -maxdepth 2 -name node_modules -type d | xargs sudo rm -rf
- find -maxdepth 3 -name node_modules -type d | xargs sudo rm -rf
- find ! -regex '^./build\(/.*\)?' -a ! -regex '^./.git\(/.*\)?' -a ! -regex '.' |
  xargs sudo rm -rf
- mv ./build/* .
- mv ./build/.* .
- sudo rm build -r
- setup_git_user
- git add .
- git commit -m "Push from development branch at Travis"
- git push origin master
env:
  global:
    secure: BbFakryk97J0RB/vLrMypnMfkORLTGmq+64lV0cQoKibq6lvDDDLrFdHZTKSOuzIkdp3zeVhjWlBQNfLnc7WZ/DAUmSMhhoC4OWOBPjefJ1ykkSGGUNy1Fr4P1nE/dl5hgey3/1ZCoAT1zbIBdjHUDO17ng3+N0QVRLluztmehDZoYFtmwRSKhRlyVg8WZvOusT4NtqQdbrSK0vPsJLvVh+QtdoohGzStTWViBDbHCwkX98o6F8RWNTiWMJUvfNfTaMouIy1y+rq/Cg0otN4QgDYq86AsELVsqbzxItYbejTX2XqVqEnesp+qk2+CaZSMdn3EQqNW59x1+MnrufdSoD+23vO0nRro/46W6VlXDIgV7vgmrFdqH1wCP7XJlI3Ewcudy/XRkTOYk2iDfZYNX5yS4xD/QWJ4YGwl4YMNgxSdaSRMA4j7cO6aSDSQQHvCqybBRNqpod/9z+sbTc2Gtl6pA5eXpGuCUT0RO/4CllTwZE1NFKsfj+H97OlUwlHj4edP/I1hj+2G/yRlhHtrCC1jhswejVJJSp5VJvXkvN4/1u2+rmYNBfYrFI0Htgffuc+TI9/sB3Mz5UMqyY0wf1u90wdMeWPvKk8MDgxf5SXqAv3O25UK/VcXnyWElR+CYzzIbKQB+Ms5OA+B2QbOwOrBHcQwWlPVt5qRvies+w=
