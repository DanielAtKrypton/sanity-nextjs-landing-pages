language: node_js
node_js:
- '12'
install:
- npm ci
script:
- npm test
after_success:
- git config credential.helper "store --file=.git/credentials"
- echo "https://${GH_TOKEN}:@github.com" > .git/credentials
after_script:
- source ./scripts/create_all_branches.sh
- create_all_branches
- git checkout master
- sudo find . ! -regex '^./build\(/.*\)?' ! -regex '^./.git\(/.*\)?' -delete
- sudo rm **/node_modules build/studio/dist build/web/out -r
- sudo mv -v ./build/* .
- sudo mv -v ./build/.* .
- sudo rm build -r
- git add .
- git commit -m "Travis push from development branch"
- git push origin master
env:
  global:
    secure: UV2no8cx9DDmUZmJr/vikZN/6zqJOF5toIR1zf26tTz542ghgwPQxiaIEdCUf/Y9whXt9KBr0z21snNwo/X2bRkaDiVpCOwv1Ys+Ezltq2Sno2rIyo0WOERzVTkoJTkm6Du0mfNe/qor+xAzyZIvdMWw/WImC0gT6a28NA4p4//Vj+54DVbsMooOSYqIIPcdt2oraDPZrSzI7sPpTOrsvLK2S/ixTTIyoWXuHUm+YqoTDHvovxHkML+DwGmrfGLW/4e1Bvy95E7ghEa8guDwzCNKeqptL4VZz5GambrLz0703YGk93CCcpvkMrv4QxiYBahiP3LvVHCI/VHDc5KvzIXJgQD4SJ3qdKdZoyegWLnKL5yA2A7JBx4QDyjTXXY2awjGn2QKN2kOhjkbk93NsoWp+YKYO30SHhU9DnPVlRtJI4lcxVFjjDpDBTbwW1XvJO6nFyu5cQrf7rPkUYl5ECBTA3OMnAZKHT7jsHmWuBeVcC69d3HNnrc2z0ReEkVi1szHrwmyZF5kGGvuF/h2u48uyUqBJ+wQ/yHktM0sN9guIkpVryyLWmZmvILAHRORfQ8YZjjuDFO0mkPAw2vEsEhsYpqYeSVOhRfDo0Jc5wGUpXpp2Tf28AOd2ve3H7tcOEJzIcmCSvR5EGU/lbkDa1D5viHKauRHn8GJ37GpvIw=
