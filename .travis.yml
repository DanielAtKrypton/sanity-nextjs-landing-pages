language: node_js
node_js:
- '12'
install:
- npm ci
script:
- npm test
after_success:
- source ./scripts/create_all_branches.sh
- create_all_branches
- git checkout master
- find -maxdepth 1 -name node_modules -type d | xargs sudo rm -rf
- find -maxdepth 2 -name node_modules -type d | xargs sudo rm -rf
- find -maxdepth 3 -name node_modules -type d | xargs sudo rm -rf
- find ! -regex '^./build\(/.*\)?' -a ! -regex '^./.git\(/.*\)?' -a ! -regex '.' |
  xargs sudo rm -rf
- sudo mv ./build/.* ./build/* .
- sudo rm build -r
- git config credential.helper "store --file=.git/credentials"
- echo "https://${GH_TOKEN}:@github.com" > .git/credentials
after_script:
- setup_git_user
- git add .
- git commit -m "Push from development branch at Travis"
- git push origin master
env:
  global:
    secure: fs6Z0c7GjL83Wov6A4ewNLQv74oYBf/SY7P77RFQA70W835FaPYsLbEb/NlQCaRP7F0sF2XxoDe/RVhjy1xVSX0rbzH1FdUjB8pos9przNh+xm/gN3oY9GACuIKErM4qaanC5NC4jsgOawSELT+4hQQUUNJF0BU8P0EdiF1qvqMpeI5HsIsJMFhGVj2je1ki8an9iiuTipdGtSiosGYzHLhNGc1O4GzCRL67RYrPLPc6a7zbagsscaRczI3HHF8cvr7ek9fcRV7Y7wCs2B7soXXzk4ZPJR+nJOdBIXUyvUCt/a9aWkOHX8xI//bP8sd2VY088iieMM08LJC/4hYJLPncY9JxUoGgsw0MiorXsC4gFuB5V9sZOm1wWy0L3Bng+isvZdfsR7T1JkZEy3iTwgAokU8y/xCPrSZyEr1oVGPczW85DmkmZP2cPDlW6sZXMZu2qxSpenhfO/YvhaLLU/o+MwB8JjcJivFxZOb9RWMbUeHIkWTWLbtSdgEutINphfBWUuZSAdYMk+P2Mql/Y2eZDMoV9xG7QvGxMvHOcxptX9QnAlpjAprZiQDZCCpXdplUMRPvKoRMCAy8KHVIZFCqlFsNLV8KyIP2GWuOVOaTnUw8N31w2kB0zVvVUwQbskNh0cyHBO/iQIcLG2E5QywAzzw06LZZHuoRFuAMePc=
