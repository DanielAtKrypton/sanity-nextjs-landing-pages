language: node_js
node_js:
- '12'
install:
- npm ci
script:
- npm test
after_success:
- git config credential.helper "store --file=.git/credentials"
- echo "https://${GH_TOKEN}:@github.com" > .git/credentials
after_script:
- source ./scripts/create_all_branches.sh
- create_all_branches
- git checkout master
- find -maxdepth 1 -name node_modules -type d | xargs sudo rm -rf
- find -maxdepth 2 -name node_modules -type d | xargs sudo rm -rf
- find -maxdepth 3 -name node_modules -type d | xargs sudo rm -rf
- find ! -regex '^./build\(/.*\)?' -a ! -regex '^./.git\(/.*\)?' -a ! -regex '.' |
  xargs sudo rm -rf
- sudo mv ./build/* .
- sudo mv ./build/.* .
- sudo rm build -r
- setup_git_user
- git add .
- git commit -m "Push from development branch at Travis"
- git push origin master
env:
  global:
    secure: L9UTe0hTnmWv6HDUEeYtHfglS6ZM0risAYjgjxquRwlKMB8aQkrWWmtcLFUt9hucifCfS3Tc3h29qTxbForiRWiuNiGCvKTI++VHbt1cqsGHeq16soYLZFjoHYbDWcUUvXe8s7QX72CBNRcou6+GyxoOZkMw/QRDsM41aAPvoOxUKwxmXHIKznWoVxSXfKaYXIYKtTMfRNMVkwZ+YG4/AyN3BRGgNlUHgHIxeglfl9WP0pqDxXbAShTcE9cls9ut5yqq6rV1Ar9UtKqqcxcUqwjVytcfCAwfHa093bs0qxt7GF32icNqsclIct3cX2w8fBZem3fQJDGDnpLJ7pkoFWX0UQm5yrQvkpaUj72GQolgPYdP41qLQxBOW/sM6IizpY025RneenhIuDWOnBIWy3yUe6R0GNIa9hC4jNkcDTBpN67GI8B/Jr9nsSkVX9EwCtg9RloLTdzT5JaECs/Tyub5yaZmt0+Q1aZ1UHh7NyauPz0Z9Vv5J/McDJWeRXRQoXGRMV9/c+ICH9yvYZsAtA3tMWjlI2XCcqnZrpEYg0mLR/yfgJgFwEpBGqf8rhTM4lVXfLy0TkGqbDOf36enuq7kWAL0q9n502J8FkhTim3qQ1VVPtUjAZ9CpKCklL8YAylum51YaGRPyNZAG2DUrQxv3GH2uKVLxHMMx7prdn8=
