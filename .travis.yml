language: node_js
node_js:
- '12'
install:
- npm ci
script:
- npm test
after_success:
- git config credential.helper "store --file=.git/credentials"
- echo "https://${GH_TOKEN}:@github.com" > .git/credentials
after_script:
- source ./scripts/create_all_branches.sh
- create_all_branches
- git checkout master
- sudo find . ! -regex '^./build\(/.*\)?' ! -regex '^./.git\(/.*\)?' -delete
- sudo rm **/node_modules build/studio/dist build/web/out -r
- sudo mv -v ./build/* .
- sudo mv -v ./build/.* .
- sudo rm build -r
- git add .
- git commit -m "Travis push from development branch"
- git push origin master
env:
  global:
    secure: T+c+8xmdhfIFsive2zZJochoSdAHQEVaFRu4qfutYqJsTBd6AScLIvXC/UKcTe8OOH/2teYdu8QhVr0jmqrqmNBiAGBlBY41Yfcluzn2vkX5H+dZ8ptBkfGcw5bCe777QP9SrC2vysaZBkjC7+z1gTJFIxsD4dvIQqhIp7/u3mvZVdw5THbsGALnUE65xZVkwC8yEofujJj6H/mXCtKTizVG78Xlo79nj1y3Ff0g4cXVMBC4Obl63pqupsr1T9Y3aRubCcuv0yPyT9K+NNJL3BEeSaDD2yTVIYnIJiSY7vtNksoJXLGd5X4MFX6BPoqiDmfjlIvRYxw72tRmNjerirvrBEMvJuqZphSshnEM1MofrVSM1gtIX5OyzIAu7AMRZOYYoLNX0vTQ6Nts8QXuWWGwUaxL6SEnhKHu8/AZnWA6BffEsYygNWNAAbDJaxDM/w9tVc7R1Onb1Qc+rTlxX03Mis/++wNJk6BiWQ6cjYTlvN4LcLZBw7SJfNFvfumI0j+kDKYzoASrZvZTPLsE5KxGwweCVzJSOO+e5WsDC0f4TD8ZRg+khn1EIYGptRKal3/0zQwTtLPHKU5B4MovVWS/mvgkuP4l+2vdgv6rzvcfra7FOBVz9rhSqg8Tnk4yQXiAX3gRgE7opjRi3QEVJYpUAlfmZZeBgyf4RS2CRbg=
