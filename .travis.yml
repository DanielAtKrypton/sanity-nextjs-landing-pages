language: node_js
node_js:
- '12'
install:
- npm ci
script:
- npm test
after_success:
- source ./scripts/create_all_branches.sh
- create_all_branches
- git checkout master
- find -maxdepth 1 -name node_modules -type d | xargs sudo rm -rf
- find -maxdepth 2 -name node_modules -type d | xargs sudo rm -rf
- find -maxdepth 3 -name node_modules -type d | xargs sudo rm -rf
- find ! -regex '^./build\(/.*\)?' -a ! -regex '^./.git\(/.*\)?' -a ! -regex '.' |
  xargs sudo rm -rf
- wait
- sudo mv ./build/.* ./build/* .
- sudo rm build -r
- git config credential.helper "store --file=.git/credentials"
- echo "https://${GH_TOKEN}:@github.com" > .git/credentials
after_script:
- setup_git_user
- git add .
- git commit -m "Push from development branch at Travis"
- git push origin master
env:
  global:
    secure: dJrtvAiFsxvn+OZWad06g7ZIDFSXfcPRABXs5GKJo4t12irP5VbTHHXodelY9UA0U4wjA/7pWJv3bkHly71et7LO4zLAiKc1DhlrmuZb8LvRI7B1fiGZJ946iVG5eHxqHURokKTStow8gGIlnKtluB09K+1j/ZXTMjJgxHjYufVVwLNIT05ZDrmBEn8qimKuxRztviGeQxo0B6Szj4TuY64foAXLw+UV/PwjuS5Wpdavoyzjk+EG4qecTJubKaSHhSl/ip1NzIdKirVZjronje1ZAN9Bn4kb2tyuSAb7iVu3I4Nq4sKNjuiV4wZsdzgXRam0CRG0CJoOos+bUxVGo6Vyc9JEmR5xKu0REAQ8UifIt75LVKktjfSTpzU1d4aU4P+UUv2tDtaZR2FvoNYwfLeisAKkS1mYyH5QXMiR1rmIdRP7qLE9EZ3ALiNoRo6bjqaGG1z34w3V0MiI9LAnGOuaCup5MaEnmSduHXaGzTyQ1tkAeKCCUtlkK7OFEokVjsLCDOtN/RlEKfCYiLhdk2ZGZr33kGE4ipk+03zfx8HGC93+1InTww4SyIRrdmzXRZXMlGfNI22qt/bz6DzJ23ZJuioRkVztnS4ec+4IvjawUAUKrdW9hydfK/lmhBBM0poQVt2RRkB4Fa7ni6Qn36CaerdpskMsLMV8KyscpUs=
